import React, {useEffect, useState} from "react";
import {createRequest, HOST, Method} from "../utils/API";
import {Board} from "../Board/Board";

export const Landing = () => {
  const [game, setGame] = useState(defaultGame);

  useEffect(() => {
    createRequest(`${HOST}/game`, Method.POST, {
      player1: "moomin85",
      player2: "moominbot"
    })
      .then(response => response.json())
      .then(json => {
          console.log(`json-respone: ${json}`);
          setGame(json)
        }
      )

  }, []);

  return (
    <div>
      <h1>Her kommer et game: {game.gameId}</h1>
      <div>Player 1: {game.player1Score}</div>
      <div>Player 2: {game.player2Score}</div>
      <Board tiles={game.tiles}/>
    </div>
  );
};

const defaultGame = {
  gameId: 0,
  player1Score: 0,
  player2Score: 0,
  isRunning: false,
  tiles: [
    ['2', '0', '0', '0', '4', '0', '0', '1', '0', '0', '4', '0', '0', '0', '2'],
    ['0', '1', '0', '0', '0', '2', '0', '0', '0', '2', '0', '0', '0', '1', '0'],
    ['0', '0', '3', '0', '0', '0', '1', '0', '1', '0', '0', '0', '3', '0', '0'],
    ['0', '0', '0', '2', '0', '0', '0', '3', '0', '0', '0', '2', '0', '0', '0'],
    ['4', '0', '0', '0', '3', '0', '1', '0', '1', '0', '3', '0', '0', '0', '4'],
    ['0', '2', '0', '0', '0', '2', '0', '0', '0', '2', '0', '0', '0', '2', '0'],
    ['0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0'],
    ['1', '0', '0', '3', '0', '0', '0', '0', '0', '0', '0', '3', '0', '0', '1'],
    ['0', '0', '1', '0', '1', '0', '0', '0', '0', '0', '1', '0', '1', '0', '0'],
    ['0', '2', '0', '0', '0', '2', '0', '0', '0', '2', '0', '0', '0', '2', '0'],
    ['4', '0', '0', '0', '3', '0', '1', '0', '1', '0', '3', '0', '0', '0', '4'],
    ['0', '0', '0', '2', '0', '0', '0', '3', '0', '0', '0', '2', '0', '0', '0'],
    ['0', '0', '3', '0', '0', '0', '1', '0', '1', '0', '0', '0', '3', '0', '0'],
    ['0', '1', '0', '0', '0', '2', '0', '0', '0', '2', '0', '0', '0', '1', '0'],
    ['2', '0', '0', '0', '4', '0', '0', '1', '0', '0', '4', '0', '0', '0', '2']
  ],
  lastMove: {}
};
